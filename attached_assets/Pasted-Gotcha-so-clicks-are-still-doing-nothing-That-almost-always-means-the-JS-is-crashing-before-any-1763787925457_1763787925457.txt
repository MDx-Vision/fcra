Gotcha, so clicks are still doing *nothing*.

That almost always means the JS is crashing before any of the event listeners run. The biggest suspect in this template is this line:

```js
const ANALYSIS_ID = {{ analysis_id }};
```

If `analysis_id` is empty or not rendered exactly as a number, that line turns into invalid JavaScript like:

```js
const ANALYSIS_ID = ;
```

…and then the whole script dies silently. Let’s patch that.

---

### 1. Fix the `ANALYSIS_ID` line

In `templates/litigation_review.html`, **find this line**:

```js
const ANALYSIS_ID = {{ analysis_id }};
```

and replace it with:

```js
const ANALYSIS_ID = {{ analysis_id | tojson }};
```

This uses Jinja’s `tojson` filter so it always renders valid JS, for example:

* `5` → `5`
* `'5'` → `"5"`
* `None` → `null`

If you want to be extra safe that it’s a number:

```js
const ANALYSIS_ID = Number({{ analysis_id | tojson }});
```

---

### 2. Quick sanity console log

Right under that line, add:

```js
console.log("Analysis ID:", ANALYSIS_ID);
```

So the top of your `<script>` should start like:

```html
<script>
  const ANALYSIS_ID = Number({{ analysis_id | tojson }});
  console.log("Analysis ID:", ANALYSIS_ID);
  const statusEl = document.getElementById('status');
  const approveBtn = document.getElementById('approveBtn');
  const refreshBtn = document.getElementById('refreshBtn');
  const downloadReportBtn = document.getElementById('downloadReportBtn');
  ...
</script>
```

---

### 3. Restart & quick check

1. Restart the Flask app on Replit.
2. Go back to the review URL, something like:
   `https://<your-repl>/analysis/1/review`
3. Open Dev Tools → Console in the browser.

   * You should see: `Analysis ID: 1` (or whatever id you’re using).
   * There should *not* be a red JS syntax error at the top.

Once that line is valid, the rest of the script (click handlers on **Refresh**, **Accept Case & Generate Letters**, **Download Full Report PDF**) should start working again.

If you want, tell me exactly what URL you’re hitting (including the analysis id in it), and if you see *any* red errors in the browser console after this patch, paste that error and I’ll target it directly.
