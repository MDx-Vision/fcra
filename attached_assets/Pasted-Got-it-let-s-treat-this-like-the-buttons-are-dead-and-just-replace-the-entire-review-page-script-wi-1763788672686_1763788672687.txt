Got it, let’s treat this like the buttons are dead and just replace the entire review page script with something bullet-proof.

Below is a **drop-in replacement** for `templates/litigation_review.html`.
Paste this over the existing file, save, and reload `/analysis/1/review` in a new tab.

This version:

* Never blocks the UI
* Wires the click handlers in a very simple, explicit way
* Logs every click and every API response result to the red log box
* Only disables buttons while a request is in flight

---

### ✅ New `litigation_review.html`

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Litigation Review</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 0 0 40px;
    }
    .page {
      max-width: 1100px;
      margin: 0 auto;
      padding: 20px;
    }
    h1 {
      margin-bottom: 10px;
    }
    #logBox {
      background: #ffecec;
      border: 1px solid #f5c2c7;
      color: #721c24;
      padding: 10px;
      border-radius: 4px;
      font-family: Menlo, Monaco, monospace;
      font-size: 12px;
      height: 130px;
      overflow-y: auto;
      white-space: pre-wrap;
    }
    .toolbar {
      margin-top: 10px;
      margin-bottom: 20px;
    }
    .toolbar button {
      margin-right: 10px;
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
      border-radius: 4px;
      border: 1px solid #ccc;
      background: #e9ecef;
    }
    .toolbar button.primary {
      background: #0d6efd;
      border-color: #0d6efd;
      color: white;
    }
    .toolbar button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    #dataBox {
      background: #ffffff;
      border-radius: 6px;
      padding: 16px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    pre {
      margin: 0;
      font-size: 12px;
      font-family: Menlo, Monaco, monospace;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
  </style>
</head>
<body>
<div class="page">
  <h1>Litigation Review - ID: <span id="analysisIdLabel">?</span></h1>

  <div id="logBox"></div>

  <div class="toolbar">
    <button id="refreshBtn">Refresh Data</button>
    <button id="acceptBtn" class="primary">Accept Case &amp; Generate Letters</button>
    <button id="downloadBtn">Download Report</button>
  </div>

  <div id="dataBox">
    <h2>Analysis Data</h2>
    <pre id="dataPre">{}</pre>
  </div>
</div>

<script>
(function () {
  const logBox = document.getElementById('logBox');
  const dataPre = document.getElementById('dataPre');
  const refreshBtn = document.getElementById('refreshBtn');
  const acceptBtn = document.getElementById('acceptBtn');
  const downloadBtn = document.getElementById('downloadBtn');
  const analysisIdLabel = document.getElementById('analysisIdLabel');

  function log(message) {
    const now = new Date();
    const ts = now.toLocaleTimeString();
    logBox.textContent += ts + " > " + message + "\n";
    logBox.scrollTop = logBox.scrollHeight;
  }

  function getAnalysisIdFromUrl() {
    const parts = window.location.pathname.split("/").filter(Boolean);
    // path pattern: /analysis/<id>/review
    const idx = parts.indexOf("analysis");
    if (idx !== -1 && parts.length > idx + 1) {
      return parts[idx + 1];
    }
    return null;
  }

  const analysisId = getAnalysisIdFromUrl();
  analysisIdLabel.textContent = analysisId || "?";
  log("PAGE LOADED");
  log("Analysis ID: " + (analysisId || "not found in URL"));

  const apiBase = analysisId ? `/api/analysis/${analysisId}` : null;

  function setButtonsDisabled(disabled) {
    refreshBtn.disabled = disabled;
    acceptBtn.disabled = disabled;
    downloadBtn.disabled = disabled;
  }

  async function loadAnalysis() {
    if (!apiBase) {
      log("ERROR: Could not determine analysis ID.");
      return;
    }
    try {
      log("Fetching analysis data...");
      setButtonsDisabled(true);
      const url = `${apiBase}/data`;
      log("GET " + url);
      const res = await fetch(url);
      log("Response status: " + res.status);
      const json = await res.json();
      dataPre.textContent = JSON.stringify(json, null, 2);
      log("Data loaded.");
    } catch (err) {
      log("ERROR loading analysis: " + err.message);
    } finally {
      setButtonsDisabled(false);
    }
  }

  async function approveCase() {
    if (!apiBase) {
      log("ERROR: No analysis ID, cannot approve.");
      return;
    }
    try {
      log("Accept button clicked, calling /api/approve...");
      setButtonsDisabled(true);
      const url = `/api/approve/${analysisId}`;
      log("POST " + url);
      const res = await fetch(url, { method: "POST" });
      log("Response status: " + res.status);
      const json = await res.json().catch(() => ({}));
      log("Response body: " + JSON.stringify(json));

      if (!res.ok || json.success === false) {
        alert("Error: " + (json.error || "Approve failed"));
        return;
      }

      alert("Stage 2 complete, letters generated!");
      // reload data so you can see updated stage
      await loadAnalysis();
    } catch (err) {
      log("ERROR in approveCase: " + err.message);
      alert("Error generating letters: " + err.message);
    } finally {
      setButtonsDisabled(false);
    }
  }

  function downloadReport() {
    if (!apiBase) {
      log("ERROR: No analysis ID, cannot download report.");
      return;
    }
    const url = `/api/download/analysis/${analysisId}/full_report`;
    log("Downloading report: " + url);
    // Simple redirect download
    window.location.href = url;
  }

  // Wire up buttons
  refreshBtn.addEventListener("click", function () {
    log("Refresh button clicked.");
    loadAnalysis();
  });

  acceptBtn.addEventListener("click", function () {
    log("Accept Case button clicked.");
    approveCase();
  });

  downloadBtn.addEventListener("click", function () {
    log("Download button clicked.");
    downloadReport();
  });

  log("Buttons wired, initial load starting...");
  loadAnalysis();
})();
</script>
</body>
</html>
```

---

### What this should fix

1. **Click handlers are guaranteed**
   If you click any button, you’ll see a new line in the red log box like:

   * `Refresh button clicked.`
   * `Accept Case button clicked.`
   * `Download button clicked.`

2. **You’ll see exactly what each API call does**
   For example, after clicking “Accept Case & Generate Letters” you’ll see:

   * `POST /api/approve/1`
   * `Response status: 200` or `400/500`
   * `Response body: { ... }`

3. **Buttons only disable while a request is running**, so the UI never feels “frozen”.

---

Once you paste this file and reload:

* Try **Refresh Data** first and check the log box.
* Then click **Accept Case & Generate Letters** and tell me:

  * What status code you see, and
  * What JSON shows in `Response body:` in the red log area.

From there we can fix whatever the backend returns, but this will guarantee the buttons are actually clickable again.
